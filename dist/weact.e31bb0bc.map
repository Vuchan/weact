{"version":3,"sources":["react-dom/constants.js","react-dom/dom.js","react-dom/diff.js","react-dom/component-helper.js","react/component.js","react/create-element.js","react/index.js","react-dom/render.js","react-dom/index.js","index.js"],"names":["CLASS_NAME","STYLE_NAME","ELEMENT_NODE","TEXT_NODE","ATTR_KEY","TAG_TEXT","TAG_CLASS_COMPONENT","TAG_FUNCTION_COMPONENT","TAG_HIGH_ORDER_COMPONENT","setAttribute","dom","name","value","style","cssText","val","test","toLowerCase","removeAttribute","isSameNodeType","vnode","nodeType","tag","nodeName","toUpperCase","_component","constructor","replaceNode","newNode","oldNode","ret","parentNode","replaceChild","removeNode","removeChild","removeChildren","node","lastChild","next","previousSibling","recollectNodeTree","unmountOnly","component","unmountComponent","applyRef","ref","recyclerComponents","base","_disable","componentWillUnmount","inner","nextBase","push","diff","container","diffNode","appendChild","out","undefined","String","textContent","document","createTextNode","diffComponent","createElement","childNodes","map","call","Array","prototype","children","length","diffChildren","diffAttributes","props","oldDom","vnodeChildren","keyedNodesMap","unkeyedNodesList","domChildNodes","keyedLen","unkeyedNodesLen","vnodeLen","i","domChildNode","key","startPosFlag","vnodeChild","child","j","unkeyedNode","newDomNode","oldDomNode","nextSibling","insertBefore","hasOwnProperty","getAttribute","createComponent","inst","render","Component","setComponentProps","componentWillMount","componentWillReceiveProps","renderComponent","renderer","componentWillUpdate","componentDidUpdate","componentDidMount","isReactComponent","state","stateOrFn","callback","newState","TypeError","Object","defineProperty","configurable","enumerable","EMPTY_CHILDREN","stack","VNode","lastSimple","simple","arguments","pop","p","renderVnode","keys","forEach","list","content","List","ref1","ref2","setState","splice","forward","bind","backward","insert","append","remove","React","App","console","time","ReactDOM","querySelector","timeEnd","log","window"],"mappings":"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","file":"weact.e31bb0bc.map","sourceRoot":"..","sourcesContent":["\nexport const CLASS_NAME = 'className';\nexport const STYLE_NAME = 'style';\n\nexport const ELEMENT_NODE = 1; // An Element node such as `<p>` or `<div>`\nexport const TEXT_NODE = 3; // The actual `Text` of `Element` or `Attr`\n\nexport const ATTR_KEY = '__react_attr__';\n\nexport const TAG_TEXT = 'TEXT';\nexport const TAG_CLASS_COMPONENT = 'CLASS_COMPONENT';\nexport const TAG_FUNCTION_COMPONENT = 'FUNCTION_COMPONENT';\nexport const TAG_HIGH_ORDER_COMPONENT = 'HIGH_ORDER_COMPONENT';","import { CLASS_NAME, STYLE_NAME, TEXT_NODE, ELEMENT_NODE, ATTR_KEY } from \"./constants\";\nimport Component from \"../react/component\";\n\n\nexport function setAttribute(dom, name, value) {\n  if (name === CLASS_NAME) name = 'class'\n\n  if (name === STYLE_NAME) {\n    if (!value || typeof value === 'string') dom.style.cssText = value || ''\n    if (value && typeof value === 'object') {\n      // Supports number to be number + `px`\n      for (let name in value) {\n        const val = value[name]\n\n        if (typeof val === 'number') {\n          dom.style.name = val + 'px'\n        } else {\n          dom.style[name] = val\n        }\n      }\n    }\n  } else if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n  } else {\n    if (value) {\n      if (name in dom) {\n        dom[name] = value\n      }\n\n      // Supports `class`, cause class is not in dom, its real name is `className`\n      // But could use `Element.setAttribute`, to learn more `https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute`\n      dom.setAttribute(name, value)\n    } else {\n      dom.removeAttribute(name)\n    }\n  }\n}\n\n\n/**\n * isSameNodeType\n * @param {HTMLElement} dom\n * @param {VNode} vnode\n * @returns {Boolean}\n */\nexport function isSameNodeType(dom, vnode) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return dom.nodeType === TEXT_NODE\n  }\n\n  if (typeof vnode.tag === 'string') {\n    return dom.nodeType === ELEMENT_NODE && dom.nodeName.toUpperCase() === vnode.tag.toUpperCase()\n  }\n\n  return dom && dom._component && dom._component.constructor === vnode.tag;\n}\n\n\n/**\n * replaceNode\n * @description 从旧元素的父节点替换旧元素到新元素\n * @param {HTMLElement} newNode HTMLElement\n * @param {HTMLElement} oldNode HTMLElement\n * @returns {false | HTMLElement} If replaceChild success will return the newNode\n */\nexport function replaceNode(newNode, oldNode) {\n  const ret = oldNode && oldNode.parentNode.replaceChild(newNode, oldNode)\n\n  // for GC\n  if (ret) {\n    oldNode = null\n  }\n\n  return ret;\n}\n\n\n/**\n * removeNode\n * @param {*} dom Which dom need be removed\n * @returns {false | HTMLElement} If removeChild success will return the oldNode\n */\nexport function removeNode(dom) {\n  const ret = dom && dom.parentNode.removeChild(dom)\n\n  // for GC\n  if (ret) {\n    dom = null\n  }\n\n  return ret;\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n  node = node.lastChild\n\n\twhile (node) {\n\t\tlet next = node.previousSibling\n\t\trecollectNodeTree(node, true)\n\t\tnode = next\n\t}\n}\n\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n\tlet component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n  }\n\n\telse {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node[ATTR_KEY]!=null) applyRef(node[ATTR_KEY].ref, null);\n\n\t\tif (unmountOnly===false || node[ATTR_KEY]==null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n\nconst recyclerComponents = []\n/**\n * https://github.com/developit/preact/blob/master/src/vdom/component.js#L268\n * @param {Component | Function} component Which component need be removed\n */\nfunction  unmountComponent(component) {\n  let base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tlet inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t}\n\telse if (base) {\n\t\t// if (base[ATTR_KEY]!=null) applyRef(base[ATTR_KEY].ref, null);\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\trecyclerComponents.push(component);\n\n\t\tremoveChildren(base);\n\t}\n}","import { TEXT_NODE } from \"./constants\"\nimport { setComponentProps, createComponent } from \"./component-helper\"\nimport { isSameNodeType, replaceNode, removeNode, recollectNodeTree, setAttribute } from \"./dom\"\n// import { renderComponent } from './render'\n\n\n/**\n * diff\n * @param {HTMLElement} dom\n * @param {VNode} vnode\n * @param {HTMLElement} container\n */\nexport function diff(dom, vnode, container) {\n  const ret = diffNode(dom, vnode)\n\n  // 如果有容器存在且返回的 ret.parentNode 不等于该容器，则在该容器中插入 ret\n  if (container) {\n    if (ret.parentNode !== container) {\n      container.appendChild(ret);\n    }\n  }\n\n  return ret;\n}\n\n\n/**\n * diffNode\n * @param {HTMLElement} dom Real DOM\n * @param {VNode} vnode Virtual Dom\n * @returns {HTMLElement} After dynamic updates\n * @description\n *  1. vnode 是 string, 判断真实 dom 是否是文本节点\n *    1.1 Y 继续比对 dom.textContent 是否一致，不一致则更新内部textContent\n *    1.2 N 创建新的文本节点 out -> replaceDom(new: out, old: dom)\n *  2. vnode 是 object, 判断 vnode 的 tag\n *    2.1 function -> diffComponent(dom, vnode)\n *    2.2 text(built-ins tags) -> isSameNodeType(dom, vnode)\n *      2.2.1 Y -> Step 3\n *      2.2.2 N -> 创建新元素 out = document.createElement(vnode.tag)\n *              -> 复制子元素 [...dom.childNodes].forEach(out.appendChild)\n *              -> 替换新元素 replaceDom(new: out, old: dom)\n *  3. vnode 有子元素\n *    3.1 Y -> diffChildren(dom, vnode)\n *    3.2 N -> Step 4\n *  4. diffAttributes\n */\nexport function diffNode(dom, vnode) {\n  let out = dom;\n\n  if (typeof vnode === 'undefined' || vnode === undefined || vnode === null || typeof vnode === 'boolean') return vnode = '';\n  if (typeof vnode === 'number') vnode = String(vnode);\n\n  if (typeof vnode === 'string') {\n    if (dom && dom.nodeType === TEXT_NODE) {\n      if (dom.textContent !== vnode) {\n        out.textContent = vnode\n      }\n    } else {\n      // The `Node.replaceChild()` method replaces one child node of the specified node with another.\n      // Syntax: `replacedNode = parentNode.replaceChild(newChild, oldChild);`\n      out = document.createTextNode(vnode)\n      replaceNode(out, dom)\n\n      return out;\n    }\n  } else {\n    const { tag/* , props = {}, children */ } = vnode\n\n    if (typeof tag === 'function') {\n      // 如果是函数式组件或者类组件\n      // 则调用 diffComponent 并返回 diff 后的 dom 元素\n      return diffComponent(dom, vnode)\n    } else {\n      // 如果不存在被 diff 的 dom 元素，即还未创建这个 dom 元素\n      // 或 dom 和 vnode 不是相同 nodeType 节点类型时\n      if (!dom || !isSameNodeType(dom, vnode)) {\n        // create a new real dom of vnode\n        // 先创建这个 dom 元素\n        if (tag && typeof tag === 'string') out = document.createElement(tag)\n        else return\n\n        // 如果有 dom 但是是不相同的 nodeType 节点类型时，先创建 out 的真实 dom 元素\n        // 然后将 dom 中所有的子元素节点全部插入到 out 中，\n        // 最后再将原先 dom 元素的位置替换成最新的 out 元素，\n        // （即从 dom 元素父节点替换掉了这个 dom 标签，但保留了原标签中所有的子元素）\n        if (dom) {\n          // `...` destruct a Array-Like object to be a real array\n          // Append the children nodes from `dom` to `out`\n          [...dom.childNodes].map.call(Array.prototype, out.appendChild)\n          replaceNode(out, dom)\n        }\n      }\n    }\n  }\n\n  // 如果 vnode 有子元素或者 out.childNodes 有子节点，就进入 diffChildren 函数\n  if (vnode && vnode.children && vnode.children.length > 0 || (out.childNodes && out.childNodes.length > 0)) {\n    diffChildren(out, vnode.children)\n  }\n\n  diffAttributes(out, vnode.props || {})\n\n  return out;\n}\n\n\n/**\n * diffComponent\n * @param {HTMLElement | undefined} dom HTMLElement\n * @param {VNode} vnode Virtual dom\n */\nfunction diffComponent(dom, vnode) {\n  let component = dom && dom._component;\n  let oldDom = dom;\n\n  // if constructor does not change, reset props again\n  if (component && component.constructor === vnode.tag) {\n    setComponentProps(component, vnode.props || {})\n  } else {\n    // Remove old dom, and render new one\n    if (component) {\n      if (component.componentWillUnmount) component.componentWillUnmount();\n      removeNode(component.base)\n      component = null\n    }\n\n    component = createComponent(vnode.tag, vnode.props)\n    setComponentProps(component, vnode.props || {})\n    dom = component.base\n\n    if (oldDom && dom !== oldDom) {\n      oldDom._component = null;\n      removeNode(oldDom);\n    }\n  }\n\n  return dom;\n}\n\n\n/**\n * diffChildren\n * @param {HTMLElement|undefined} dom HTMLElement\n * @param {VNodeCollection<Vnode>} vnodeChildren Vnode Collection\n */\nfunction diffChildren(dom, vnodeChildren) {\n  const keyedNodesMap = {} // 有 key 的元素 map\n  const unkeyedNodesList = [] // 没有 key 的元素 list\n  const domChildNodes = dom.childNodes // 获取所有的子元素\n  let keyedLen = 0 // 标记 key 的长度\n  let unkeyedNodesLen = 0 // 未标记 key 的元素集合的长度\n  let vnodeLen = vnodeChildren.length || 0\n\n  // 遍历 domChildNodes 集合，收集 key 标记和无 key 标记\n  for (let i = 0; i < domChildNodes.length; i++) {\n    const domChildNode = domChildNodes[i];\n\n    // 如果元素有 key 属性，则记录到 keyedNodesMap\n    // 否则 push 到 children 数组\n    if (domChildNode.key) {\n      keyedLen++\n      keyedNodesMap[key] = domChildNode\n    } else {\n      unkeyedNodesList[unkeyedNodesLen++] = domChildNode\n    }\n  }\n\n  if (vnodeLen > 0) {\n    let startPosFlag = 0; // 起点位置 flag 变量\n\n    for (let i = 0; i < vnodeLen; i++) {\n      const vnodeChild = vnodeChildren[i]; // 当前 vnode\n      const key = vnodeChild.key; // 获取当前 vnode 的 key 属性\n      let child = null;\n\n      if (key) { // 如果存在 key\n        if (keyedLen && keyedNodesMap[key]) { // 且 key 存在与当前真实的 dom.childNodes 集合中\n          child = keyedNodesMap[key] // // 直接赋值当前 child 到真实 domChild\n          keyedNodesMap[key] = null // GC\n\n          keyedLen--\n        }\n      } else if (startPosFlag < unkeyedNodesLen) {\n        // 其实这里的这种标记方法？存疑？为什么要用这样的标记方法？\n        // 如果 起始位置标示变量 < 未被key标记的元素集合 长度，则循环当前的 unkeyedNodesList\n        // 取出每一个 unkeyedNode 并与 vnodeChild 作比较且优先匹配 vnodeChild 相同节点类型\n        for (let j = 0; j < unkeyedNodesLen; j++) {\n          let unkeyedNode = unkeyedNodesList[j];\n\n          if (unkeyedNode && isSameNodeType(unkeyedNode, vnodeChild)) {\n            child = unkeyedNode // 配对成功，赋值 child\n            unkeyedNodesList[j] = null // 配对成功，清空元素 & GC\n\n            // 如果是最后一个元素 则整体长度减一\n            if (j === unkeyedNodesLen - 1) unkeyedNodesLen--;\n            // 如果 j === 起始位置长度，则 startPosFlag 加一\n            if (j === startPosFlag) startPosFlag++;\n            break;\n          }\n        }\n      }\n\n      // Executes `diffNode(child, vnodeChild)` algorithm\n      // 执行 diffNode，返回 diff 之后的真实 DOM 结构\n      const newDomNode = diffNode(child, vnodeChild)\n      // 原先存在于该 `index` 位置的 domChildNode\n      const oldDomNode = domChildNodes[i]\n\n      /**\n       * NODES LIST OPERATIONS ENUM:\n       * forward 前移\n       * backward 后移\n       * insert 插入\n       * append 追加\n       * remove 删除\n       */\n      if (newDomNode && newDomNode !== dom && newDomNode !== oldDomNode) {\n        // 如果更新前的对应位置为空，说明此节点是新增的，则新追加这个节点\n        if (!oldDomNode) {\n          dom.appendChild(newDomNode)\n        } else if(newDomNode === oldDomNode.nextSibling) {\n          // 如果更新后的节点和更新前对应位置的下一个节点一样，说明当前位置的节点被移除了\n          removeNode(oldDomNode)\n        } else {\n          // 将更新后的节点移动到正确的位置\n          // var insertedNode = parentNode.insertBefore(newNode, referenceNode);\n          dom.insertBefore(newDomNode, oldDomNode)\n        }\n      }\n    }\n  }\n\n  if (keyedLen) {\n    for (const key in keyedNodesMap) {\n      if (keyedNodesMap[key]) {\n        recollectNodeTree(keyedNodesMap[key], false)\n      }\n    }\n  }\n\n  /*\n  // FROM: https://github.com/developit/preact/blob/master/src/vdom/diff.js#L266\n  // remove orphaned unkeyed children:\n\twhile (startPosFlag <= unkeyedNodesLen) {\n\t\tif ((child = unkeyedNodesList[unkeyedNodesLen--]) !== undefined) recollectNodeTree(child, false)\n  } */\n}\n\nfunction diffAttributes(dom, props) {\n  for (const name in props) {\n    if (props.hasOwnProperty(name)) {\n      const value = props[name];\n\n      if (value) {\n        setAttribute(dom, name, value)\n      } else {\n        if (dom.getAttribute(name)) {\n          setAttribute(dom, name, undefined)\n        }\n      }\n    }\n  }\n}","// import { renderVnode } from './render'\nimport Component from '../react/component'\nimport { diffNode } from './diff'\n\nexport function createComponent(component, props) {\n  // from preact?\n  let inst;\n\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n  } else {\n    // Make a new instance of Component\n    inst = new Component(props);\n    inst.constructor = component;\n    inst.render = function() {\n      return this.constructor(props);\n    }\n  }\n\n  return inst;\n}\n\nexport function setComponentProps(component, props) {\n  // Not Mount, So execute componentWillMount\n  if (!component.base) {\n    if (component.componentWillMount) component.componentWillMount();\n  } else if (component.componentWillReceiveProps) {\n    component.componentWillReceiveProps(props);\n  }\n\n  component.props = props;\n  renderComponent(component);\n}\n\nexport function renderComponent(component) {\n  let base;\n\n  // Render component, just executes `React.createElement()` function.\n  const renderer = component.render();\n\n  // If it be mounted before\n  if (component.base && component.componentWillUpdate) {\n    component.componentWillUpdate();\n  }\n\n  base = diffNode(component.base, renderer);\n\n  if (component.base) {\n    // did update\n    if (component.componentDidUpdate) component.componentDidUpdate();\n  } else if (component.componentDidMount) {\n    // did mount\n    component.componentDidMount();\n  }\n\n  // replace child\n  if (component.base && component.base.parentNode) {\n    component.base.parentNode.replaceChild(base, component.base);\n  }\n\n  component.base = base;\n  base._component = component;\n}","import { renderComponent } from '../react-dom/component-helper'\n\nexport default class Component {\n  // static isReactComponent = true\n\n  constructor(props = {}) {\n    this.isReactComponent = true\n    this.state = {}\n    this.props = props;\n  }\n\n  setState(stateOrFn, callback) {\n    if (typeof stateOrFn === 'function') {\n      const newState = stateOrFn()\n\n      if (typeof newState !== 'object') {\n        throw new TypeError(`this.setState((stateChange: Function) => object) must return an object!`)\n      } else {\n        this.state = newState\n      }\n    } else if (typeof stateOrFn === 'object') {\n      this.state = stateOrFn\n    } else {\n      throw new TypeError(`this.setState only accept 'function' or 'object', not this type ${typeof stateOrFn}`)\n    }\n\n    renderComponent(this);\n  }\n\n  render() {\n    throw \"Must implements render function.\";\n  }\n}\n\nObject.defineProperty(Component, 'isReactComponent', {\n  value: true,\n  configurable: false,\n  enumerable: false\n})","const EMPTY_CHILDREN = []\nconst stack = []\nfunction VNode() {}\n\n\nexport default function createElement(tag, props = {}) {\n  let children = EMPTY_CHILDREN, lastSimple, child, simple, i;\n\n\tfor (i=arguments.length; i-- > 2; ) {\n\t\tstack.push(arguments[i]);\n  }\n\n\tif (props && props.children != null) {\n\t\tif (!stack.length) stack.push(props.children);\n\t\tdelete props.children;\n  }\n\n\twhile (stack.length) {\n    // 弹出栈顶的 array 并且 push 每个到 stack\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--; ) stack.push(child[i]);\n\t\t}\n\t\telse {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif ((simple = typeof tag !== 'function')) {\n\t\t\t\tif (child === null) child = '';\n\t\t\t\telse if (typeof child === 'number') child = String(child);\n\t\t\t\telse if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n      // hydrating string\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n  let p = new VNode();\n\n\tp.tag = tag;\n\tp.children = children;\n\tp.props = props == null ? undefined : props;\n\tp.key = props == null ? undefined : props.key;\n\n  // if a \"vnode hook\" is defined, pass every created VNode to it\n  // preact\n\t// if (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}","import Component from './component'\nimport createElement from './create-element'\n\nexport default {\n  Component,\n  createElement,\n}","import { createComponent, setComponentProps } from \"./component-helper\"\nimport { setAttribute } from \"./dom\"\nimport { diff } from './diff'\nimport {\n  TEXT_NODE,\n  ELEMENT_NODE,\n  TAG_TEXT,\n  TAG_CLASS_COMPONENT,\n  TAG_FUNCTION_COMPONENT,\n  TAG_HIGH_ORDER_COMPONENT,\n} from \"./constants\";\n\n\n/**\n * render\n * @param {String|VNode} vnode Virtual Node\n * @param {HTMLElement} container DOM Container\n */\nexport default function render(vnode, container, dom) {\n  return diff(dom, vnode, container);\n  // return container.appendChild(renderVnode(vnode))\n}\n\n\n/**\n * renderVnode\n * @param {String|VNode} vnode Virtual Node\n */\nexport function renderVnode(vnode){\n  let dom;\n\n  // Handle when vnode is one of `null`, `undefined` or `false`\n  if (vnode === null || vnode === false || vnode === undefined) return;\n\n  // TextNode\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    if (vnode === ' ') return;\n    return dom = document.createTextNode(vnode)\n  }\n\n  // DOMElement\n  if (typeof vnode === 'object' && vnode.tag) {\n    const { tag, props = {}, children } = vnode\n\n    if (typeof tag === 'function') {\n      // Stateless Component & State Component\n      const component = createComponent(tag, props)\n      setComponentProps(component, props);\n\n      return component.base;\n    }\n\n    dom = document.createElement(tag)\n\n    if (props) {\n      Object.keys(props).forEach(name => {\n        setAttribute(dom, name, props[name])\n      })\n    }\n\n    if (children && children.length) {\n      children.forEach(child => {\n        dom.appendChild(renderVnode(child))\n      });\n    }\n\n    return dom;\n  }\n\n  return dom;\n}\n","import render from './render'\n\nexport default {\n  render,\n}","import React from \"./react\";\nimport ReactDOM from \"/react-dom\";\n// import * as React from 'preact'\n// console.log(React);\n\nconst list = [{\n  content: '2'\n}, {\n  content: '1' // forward\n}, {\n  content: '4', // backward\n}, {\n  content: '3'\n}, // 5 insert\n {\n  content: '6' // delete\n}, /*  {\n  content: '7' // append\n} */]\n\nclass List extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      list\n    }\n  }\n\n  // 前移\n  forward () {\n    const ref1 = list[1]\n    const ref2 = list[0]\n\n    list[0] = ref1\n    list[1] = ref2\n\n    this.setState({\n      list: list\n    })\n  }\n\n  // 后移\n  backward () {\n    const ref1 = list[3]\n    const ref2 = list[2]\n\n    list[2] = ref1\n    list[3] = ref2\n\n    this.setState({\n      list\n    })\n  }\n\n  // 插入\n  insert () {\n    const ref = { content: 5 }\n    list.splice(4, 0, ref)\n\n    this.setState({\n      list\n    })\n  }\n\n  // 追加\n  append () {\n    list.push({\n      content: 7\n    })\n\n    this.setState({\n      list\n    })\n  }\n\n  // 删除\n  remove () {\n    list.splice(6, 1)\n\n    this.setState({\n      list\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <ul>\n          {\n            this.state.list.map(({ content }) => (<li key={content}>{content}</li>))\n          }\n        </ul>\n        <div className=\"buttons\">\n          <button onClick={this.forward.bind(this)}>forward</button>\n          <button onClick={this.backward.bind(this)}>backward</button>\n          <button onClick={this.insert.bind(this)}>insert</button>\n          <button onClick={this.append.bind(this)}>append</button>\n          <button onClick={this.remove.bind(this)}>remove</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass App extends React.Component {\n  render() {\n    return (\n      <List />\n    );\n  }\n}\n\n\nconsole.time('render')\nReactDOM.render(<App />, document.querySelector('#root'))\nconsole.timeEnd('render')\n\nconsole.log(\n  ReactDOM.render(\n    React.createElement(App, null)\n  )\n);\n\n\n\nwindow.list = list\nwindow.React = React\nwindow.ReactDOM = ReactDOM"]}